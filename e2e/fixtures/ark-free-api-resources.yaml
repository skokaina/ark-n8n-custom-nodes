---
# HuggingFace Free Model (No credit card required)
# Get your FREE API key: https://huggingface.co/settings/tokens
# Usage: kubectl create secret generic huggingface-api-key --from-literal=api-key='hf_...'
apiVersion: ark.mckinsey.com/v1alpha1
kind: Model
metadata:
  name: test-model
  namespace: default
  labels:
    test: e2e
    provider: huggingface
spec:
  provider: huggingface
  type: completion
  model:
    value: meta-llama/Llama-3.2-1B-Instruct  # Small, fast model
  config:
    huggingface:
      baseUrl:
        value: "https://api-inference.huggingface.co"
      apiKey:
        valueFrom:
          secretKeyRef:
            name: huggingface-api-key
            key: api-key

---
# Groq Free Model (Fast inference, no credit card required)
# Get your FREE API key: https://console.groq.com/keys
# Usage: kubectl create secret generic groq-api-key --from-literal=api-key='gsk_...'
apiVersion: ark.mckinsey.com/v1alpha1
kind: Model
metadata:
  name: groq-model
  namespace: default
  labels:
    test: e2e
    provider: groq
spec:
  provider: openai  # Groq uses OpenAI-compatible API
  type: completion
  model:
    value: llama-3.2-1b-preview  # Fast, small model
  config:
    openai:
      baseUrl:
        value: "https://api.groq.com/openai/v1"
      apiKey:
        valueFrom:
          secretKeyRef:
            name: groq-api-key
            key: api-key

---
# OpenRouter Free Model (Aggregator of free models)
# Get your FREE API key: https://openrouter.ai/keys
# Usage: kubectl create secret generic openrouter-api-key --from-literal=api-key='sk-or-...'
apiVersion: ark.mckinsey.com/v1alpha1
kind: Model
metadata:
  name: default
  namespace: default
  labels:
    test: e2e
    provider: openrouter
spec:
  provider: openai  # OpenRouter uses OpenAI-compatible API
  type: completion
  model:
    value: meta-llama/llama-3.2-1b-instruct:free  # Free model router
  config:
    openai:
      baseUrl:
        value: "https://openrouter.ai/api/v1"
      apiKey:
        valueFrom:
          secretKeyRef:
            name: openrouter-api-key
            key: api-key

---
# Test Agent using free model
apiVersion: ark.mckinsey.com/v1alpha1
kind: Agent
metadata:
  name: test-agent
  namespace: default
  labels:
    test: e2e
spec:
  modelRef:
    name: test-model  # Uses HuggingFace (or change to groq-model/default)
    namespace: default
  prompt: |
    You are a helpful test agent for E2E testing.
    Respond concisely to test queries.
    Keep responses under 50 words.
  temperature: 0.7
  maxTokens: 100

---
# Math Agent for specialized testing
apiVersion: ark.mckinsey.com/v1alpha1
kind: Agent
metadata:
  name: math-agent
  namespace: default
  labels:
    test: e2e
spec:
  modelRef:
    name: test-model
    namespace: default
  prompt: |
    You are a math assistant.
    Solve math problems accurately and show your work.
    Keep responses concise.
  temperature: 0.3
  maxTokens: 150

---
# Test Team for E2E testing
apiVersion: ark.mckinsey.com/v1alpha1
kind: Team
metadata:
  name: test-team
  namespace: default
  labels:
    test: e2e
spec:
  agents:
    - name: test-agent
      namespace: default
    - name: math-agent
      namespace: default
  orchestration:
    type: sequential

---
# Test Memory for E2E testing
apiVersion: ark.mckinsey.com/v1alpha1
kind: Memory
metadata:
  name: test-memory
  namespace: default
  labels:
    test: e2e
spec:
  type: buffer
  maxMessages: 20
  namespace: default

---
# Test Evaluator for E2E testing
apiVersion: ark.mckinsey.com/v1alpha1
kind: Evaluator
metadata:
  name: test-evaluator
  namespace: default
  labels:
    test: e2e
spec:
  dimensions:
    - name: accuracy
      description: How accurate is the response
      weight: 1.0
    - name: relevance
      description: How relevant is the response
      weight: 0.8
  modelRef:
    name: test-model
    namespace: default
