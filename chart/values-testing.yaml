# Testing values - disables authentication for E2E tests
# Usage: helm install ark-n8n ./chart -f chart/values-testing.yaml

app:
  env:
    # Disable basic auth but enable user management for auto-login
    N8N_BASIC_AUTH_ACTIVE: "false"
    N8N_USER_MANAGEMENT_DISABLED: "true"

    # Simpler hostname for testing (match proxy port for WebSocket)
    N8N_HOST: localhost:8080
    N8N_EDITOR_BASE_URL: http://localhost:8080
    WEBHOOK_URL: http://localhost:8080

    # Skip onboarding survey for testing
    N8N_PERSONALIZATION_ENABLED: "false"

    # Verbose logging for debugging
    N8N_LOG_LEVEL: debug
    N8N_LOG_OUTPUT: console

# Disable HTTPRoute for testing (use port-forward)
httpRoute:
  enabled: false

# Smaller resource requests for testing
ark:
  # Correct ARK API URL for default namespace
  apiUrl: http://ark-api.default.svc.cluster.local
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

# Enable demo proxy with auto-login for E2E testing
demo:
  enabled: true
  email: "admin@example.com"
  password: "Admin123!@#"

# Enable MCP server for E2E testing
mcp:
  enabled: true
  image:
    repository: ark-n8n-mcp
    tag: test
    pullPolicy: Never
  # n8n URL for testing environment
  n8nUrl: "http://localhost:5678"
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi
